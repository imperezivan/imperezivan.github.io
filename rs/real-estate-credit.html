<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calc Installment</title>
    <script>
        function calculateSumOfPowers(interest, years) {
            let sum = 0;
            for (let x = 0; x < years * 12; x++) {
                sum += Math.pow(interest, x);
            }
            return sum;
        }

        function calcInstallment(amount, interest, years) {
            const sumOfPowers = calculateSumOfPowers(interest, years);
            console.log(`sumOfPowers ${sumOfPowers}`);
            const installmentX = (amount * Math.pow(interest, years * 12)) / sumOfPowers;
            console.log(`installmentX ${installmentX}`);
            return installmentX
        }

        function handleFormSubmit(event) {
            event.preventDefault();

            const amount = parseFloat(document.getElementById('amount').value);

            const interest = parseFloat(document.getElementById('interest').value) / 100;
            const interestFactor = Math.pow(1 + interest, 1/12);
            console.log(`montly interest factor ${interestFactor}`);

            const years = parseFloat(document.getElementById('years').value, 10);

            try {
                const installment = calcInstallment(amount, interestFactor, years);
                document.getElementById('result').textContent = `El monto de la cuota es: ${installment.toFixed(2)}`;
            } catch (error) {
                document.getElementById('result').textContent = `Error: ${error.message}`;
            }
        }
    </script>
</head>
<body>
    <h1>Calculator</h1>
    <form onsubmit="handleFormSubmit(event)">
        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount" step="0.01" required><br><br>

        <label for="interest">Yearly interest:</label>
        <input type="number" id="interest" name="interest" step="0.0001" required><br><br>

        <label for="years">Years:</label>
        <input type="number" id="years" name="years" min="0" required><br><br>

        <button type="submit">Calc</button>
    </form>

    <p id="result"></p>
</body>
</html>
